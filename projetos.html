<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projetos</title>
    <link rel="stylesheet" href="estilo.css">
    <style>
        #nvProjeto {
            background-color: rgb(190, 187, 187);
            width: 100px;
            text-align: center;
            margin: auto;
        }

        #divProjetos {            
            
            margin: auto;
        }

        div:hover {
            background-color: rgb(114, 117, 116);
            
        }
    </style>
</head>
<body>
    <header>
        <a href="modelo.html"><img class="voltar" src="imagens/voltar.png" alt="voltar"></a>
        <h1>Projetos</h1>
    </header>
    <main>
        <div id= "nvProjeto">Novo projeto</div>
        <div id="divProjetos">
    </main>
        
    <script>
        var nvProjeto = document.querySelector('#nvProjeto') 
        var divProjetos = document.querySelector('#divProjetos')
        
        var projetosLocalStorage = JSON.parse(localStorage.getItem('projetos'))

        nvProjeto.onclick = function() {
            
            var nomeProjeto = prompt('Digite o nome do Projeto')
            var saldoInicial = Number(prompt(`Digite o saldo inicial do Projeto "${nomeProjeto}"`))
            var listaObjetos = {}
            
            if (localStorage.projetos) {
                listaObjetos = JSON.parse(localStorage.getItem('projetos')) 
            }

            var totalProjetos = Number(localStorage.getItem(`TotalProjetos`))

            listaObjetos[nomeProjeto] = {}
            listaObjetos[nomeProjeto]['id'] = (totalProjetos)
            listaObjetos[nomeProjeto]['saldoinicial'] = saldoInicial
            listaObjetos[nomeProjeto]['despesa'] = {}
            listaObjetos[nomeProjeto]['despesa']['idDespesa'] = {}
            listaObjetos[nomeProjeto]['despesa']['idDespesa']['valorDespesa'] = 0
            listaObjetos[nomeProjeto]['renda'] = {}
            listaObjetos[nomeProjeto]['renda']['idRenda'] = {}
            listaObjetos[nomeProjeto]['renda']['idRenda']['valorRenda'] = 0
            localStorage.setItem('projetos', JSON.stringify(listaObjetos)) 
            localStorage.setItem('TotalProjetos', (totalProjetos + 1))
            console.log(listaObjetos)
        }

        for (var i in projetosLocalStorage) {
        
        var a = projetosLocalStorage[i]
        
        var paragrafo = document.createElement('p')
        paragrafo.innerHTML = i
        divProjetos.append(paragrafo)
    }
    </script>
</body>
</html>