<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adicionar Despesas</title>
    <link rel="stylesheet" href="estilo.css">
</head>
<body>
    <header>
        <a href="modelo.html"><img class="voltar" src="imagens/voltar.png" alt="voltar"></a>
        <h1>Adicionar Despesas</h1>
    </header>
    <input aria-label="valor da despesa" type="number" name="AdicionarDespesas" id="inputAdicionarDespesas">
    <br>
    <select aria-label="lista de despesas" name="seldespesasadd" id="seldespesasadd">
        <option value="Mercado">Mercado</option>
        <option value="Restaurante">Restaurante</option>
        <option value="Agua">Água</option>        
    </select>
    <br>
    <input aria-label="descricao" type="text" name="descricao" id="descricao">
    <br>
    
    <img class="imgconfirmar" src="imagens/foto-confirmar.png" alt="confirmar" >
    
    <script>
        var inputAdicionarDespesas = document.getElementById('inputAdicionarDespesas')
        var confirmarAddDespesas = document.querySelector('.imgconfirmar')
        var despesaProjeto1 = Number(localStorage.getItem('despesa1'))
        var despesaProjeto2 = Number(localStorage.getItem('despesa2'))
        var despesaProjeto3 = Number(localStorage.getItem('despesa3'))
        var ultimoProjetoSelecionado = Number(localStorage.getItem('ultimoProjeto'))

        confirmarAddDespesas.onclick = function() {
            if (ultimoProjetoSelecionado == 1) {
                if (inputAdicionarDespesas.value.length == 0 || inputAdicionarDespesas.value <= 0) {
                alert('[ERRO] Digite um valor válido')        
                } else {
                despesaProjeto1 += Number(inputAdicionarDespesas.value)
                localStorage.setItem('despesa1', despesaProjeto1)
                inputAdicionarDespesas.value = ''  
                inputAdicionarDespesas.focus() 
                } 
            } else if (ultimoProjetoSelecionado == 2) {
                if (inputAdicionarDespesas.value.length == 0 || inputAdicionarDespesas.value <= 0) {
                alert('[ERRO] Digite um valor válido')        
                } else {
                despesaProjeto2 += Number(inputAdicionarDespesas.value)
                localStorage.setItem('despesa2', despesaProjeto2)
                inputAdicionarDespesas.value = ''  
                inputAdicionarDespesas.focus() 
                } 
            } else if (ultimoProjetoSelecionado == 3) {
                if (inputAdicionarDespesas.value.length == 0 || inputAdicionarDespesas.value <= 0) {
                alert('[ERRO] Digite um valor válido')        
                } else {
                despesaProjeto3 += Number(inputAdicionarDespesas.value)
                localStorage.setItem('despesa3', despesaProjeto3)
                inputAdicionarDespesas.value = ''  
                inputAdicionarDespesas.focus() 
                } 
            }
        }
        
    </script>
</body>
</html>