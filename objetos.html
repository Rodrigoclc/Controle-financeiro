<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Objetos</title>
</head>
<body>
    <main>
        <h1>Listas de Projetos</h1>
        <select aria-label="lista de projetos"  name="projetos" id="projetos">
            <option value="projeto1">projeto1</option>
        </select>
        <button id="addProjeto" type="button">Criar Projeto</button>
        <hr>
        <input id="addRenda" type="button" value="adicionar Renda">
        <hr>
        <input id="addDespesas" type="button" value="adicionar Despesa">  
        <hr>
        <input id="btres" type="button" value="resultado">
        <hr>
        <div id="res"></div>      
    </main>

    <script>
        var selectProjetos = document.getElementById('projetos')
        var addProjeto = document.getElementById('addProjeto')
        var addRenda = document.getElementById('addRenda')
        var addDespesas = document.getElementById('addDespesas')
        var res = document.querySelector('#res')
        var btres = document.querySelector('#btres')

        const projetosExistentes = selectProjetos.length

        var listaObjetos = {}

        addProjeto.onclick = function() {

            var nome = prompt('nome do projeto')
            var valorInicial = prompt('valor inicial')
            

            var option = new Option(nome)
            selectProjetos.appendChild(option)

            
            
            listaObjetos.id = projetosExistentes
            listaObjetos.projeto = nome
            listaObjetos.valorinicial = valorInicial      
            
            localStorage.setItem(listaObjetos.projeto, JSON.stringify(listaObjetos))
        }

        addRenda.onclick = function() {
            var addRenda = prompt('Adicione uma Renda')
            var categoriaRenda = prompt('digite a categoria')
            var descricaoRenda = prompt('Digite uma descrição') 

            listaObjetos.addRenda = addRenda
            listaObjetos.categoriaRenda = categoriaRenda
            listaObjetos.descricaoRenda = descricaoRenda   
            
            localStorage.setItem(listaObjetos.projeto, JSON.stringify(listaObjetos))
        }    
        
        addDespesas.onclick = function() {
            var addDespesa = prompt('Adicione uma Despesa')
            var categoriaDespesa = prompt('digite a categoria')
            var descricaoDespesa = prompt('Digite uma descrição')
            
            listaObjetos.addDespesa = addDespesa
            listaObjetos.categoriaDespesa = categoriaDespesa
            listaObjetos.descricaoDespesa = descricaoDespesa

            //localStorage.setItem(listaObjetos.nome, listaObjetos)
            //localStorage.listaObjetos.projeto = JSON.stringify(listaObjetos)
            localStorage.setItem(listaObjetos.projeto, JSON.stringify(listaObjetos))
        }

        btres.onclick = function() {
            console.log(listaObjetos.projeto)
            var reslocals = []
            reslocals = JSON.parse(localStorage.getItem(listaObjetos.projeto))
            
            for (var i in reslocals) {
                let paragrafo = document.createElement('p')
                paragrafo.innerHTML = reslocals[i]
                res.append(paragrafo)
            }
            //res.innerHTML = reslocals
        }

    </script>
</body>
</html>